/**
 * jQuery Unveil
 * A very lightweight jQuery plugin to lazy load images
 * http://luis-almeida.github.com/unveil
 *
 * Licensed under the MIT license.
 * Copyright 2013 Luís Almeida
 * https://github.com/luis-almeida
 *
 * Modified to have a callback on unveiling rather than simply lazy load an image.
 * Usage: $('.lazy').unveil({ unveiled: function () { ... } });
 */

;(function(a){a.fn.unveil=function(l){var g=a.extend({},a.fn.unveil.defaults,typeof l==="object"?l:{threshold:l,unveiled:null}),f=a(window),c=g.threshold||0,e=window.devicePixelRatio&&window.devicePixelRatio>1,i=e?"data-src-retina":"data-src",k=this,j,h,b;this.one("unveil",function(){if(a.isFunction(g.unveiled)){g.unveiled.apply(this,undefined)}else{b=this.getAttribute(i);b=b||this.getAttribute("data-src");if(b){this.setAttribute("src",b)}}});function d(){h=k.filter(function(){var n=a(this),m=f.scrollTop(),p=m+f.height(),q=n.offset().top,o=q+n.height();return o>=m-c&&q<=p+c});j=h.trigger("unveil");k=k.not(j)}f.scroll(d);f.resize(d);d();return this};a.fn.unveil.defaults={threshold:0,unveiled:null}}(jQuery));
